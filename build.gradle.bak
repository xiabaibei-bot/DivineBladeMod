plugins {
    id 'java'
    id 'idea'
    id 'net.neoforged.gradle.userdev' version '7.0.142'
}
version = mod_version
group = mod_group_id
base { archivesName = mod_id }
java.toolchain.languageVersion = JavaLanguageVersion.of(17)

repositories {
    maven { url 'https://maven.aliyun.com/nexus/content/groups/public/' }
    maven { url 'https://maven.aliyun.com/nexus/content/repositories/central/' }
    maven {
        name = "NeoForge"
        url = 'https://maven.neoforged.net/releases'
    }
    mavenCentral()
}
runs {
    configureEach {
        systemProperty 'forge.logging.console.level', 'debug'
        modSource project.sourceSets.main
    }
    client {}
    server {}
}
sourceSets.main.resources { srcDir 'src/generated/resources' }
dependencies {
    implementation "net.neoforged:neoforge:\${neo_version}"
}
tasks.named('processResources', ProcessResources).configureEach {
    var replaceProperties = [
            minecraft_version: minecraft_version,
            mod_id: mod_id,
            mod_name: mod_name,
            mod_version: mod_version,
    ]
    inputs.properties replaceProperties
    filesMatching(['META-INF/mods.toml', 'pack.mcmeta']) {
        expand replaceProperties
    }
}
